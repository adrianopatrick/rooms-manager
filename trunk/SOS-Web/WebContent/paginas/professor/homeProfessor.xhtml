<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
	xmlns:p="http://primefaces.org/ui" xml:lang="pt" lang="pt-br">
	
<f:view contentType="text/html">
        <h:head>
        
            <f:facet name="first">
                <meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>SOS</title>
            </f:facet>

            <h:outputStylesheet name="css/default.css" />
            <h:outputStylesheet name="css/estilo.css" />
        </h:head>
        <h:body>

            <p:layout fullPage="true" >
                <p:layoutUnit id="bottom" position="south" size="60">
                     <ui:include src="../rodape.xhtml" />
                </p:layoutUnit>
                <p:layoutUnit id="center" position="center">
                    <p:menubar autoSubmenuDisplay="true">
						<p:menuitem value="Minhas Reservas" url="#" />
						<p:menuitem value="Reservas pendente" url="#" />
                        <p:menuitem value="Sair" url="#" helpText="CTRL+p"/>
                    </p:menubar>
                    <div id="corpo">
	                    <h:form id="formSolicitacao">
							<p:panel header="Solicitação de Reserva de Sala">
								<h:panelGrid columns="2">
									<h:outputText value="Capacidade: " />
									<p:inputText id="nrAluno" value="#{homeProfessorManager.solicitacao.nrAlunos}" size="5" maxlength="3" required="true" requiredMessage="Campo obrigatório"/>
									 
									
									<h:outputText value="Data: " />
									<p:calendar id="dataSolicitacao" value="#{homeProfessorManager.solicitacao.data}" mask="99/99/9999" size="8" required="true" requiredMessage="Campo obrigatório" />
									
									<h:outputText value="Horario inicial: " />
									<p:inputMask id="horaInicial" value="#{homeProfessorManager.reserva.dataIncial}" mask="99:99" validatorMessage="Campo Obrigatório" size="5" required="true" requiredMessage="Campo obrigatório" >
									<f:convertDateTime timeZone="GMT-3" pattern="HH:mm" /> </p:inputMask>
									
									<h:outputText value="Horario Final: " />
									<p:inputMask id="horaFinal" value="#{homeProfessorManager.reserva.dataFinal}" mask="99:99" size="5" required="true" requiredMessage="Campo obrigatório" >
									<f:convertDateTime timeZone="GMT-3" pattern="HH:mm" /> </p:inputMask>
									
									<h:outputText value="Tipo de sala: " />  
							        <p:selectOneMenu id="tipo" value="#{homeProfessorManager.solicitacao.observacao}" effect="fade">  
							            <f:selectItem itemLabel="Sala" itemValue="Sala" />
							            <f:selectItem itemLabel="Laboratório" itemValue="Laboratorio" />
							            <f:selectItem itemLabel="Auditório" itemValue="Auditorio" />
							            <f:selectItem itemLabel="Ateliê" itemValue="Atelie" />
							        </p:selectOneMenu>
									
									<h:outputText value="Observações: " />
									<p:inputTextarea id="obs" value="#{homeProfessorManager.solicitacao.observacao}" rows="6" cols="33" />
									<p:commandButton id="btSalvar" value="Reservar" action="#{homeProfessorManager.salvar()}" update="formSolicitacao" >
										<f:ajax execute="@form" render="@form :tabelaSolicitacao" />  
									</p:commandButton>
			 						<p:messages id="mensagem" showDetail="true" autoUpdate="true" closable="true" />  
								</h:panelGrid>
							</p:panel>
	 						
	                    </h:form>
                    </div>
                </p:layoutUnit>

			<p:layoutUnit position="east" size="500px" >
					<h:form id="tabelaSolicitacao" >  
	  
				    	<p:dataTable id="dataTable" var="lista" value="#{homeProfessorManager.listaSolicitacao}" 
				    		style="max-width: 500px; min-width:500px" 
				            paginator="true" rows="10"
				            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
				            rowsPerPageTemplate="5,10,15">  
				        <f:facet name="header">  
				           Solicitações
				        </f:facet>  
				  
				        <p:column>  
				            <f:facet name="header">  
				                <h:outputText value="Qtd. Alunos" />  
				            </f:facet>  
				            <h:outputText value="#{lista.nrAlunos} alunos" />
				        </p:column>  
				  
				        <p:column>  
				            <f:facet name="header">  
				                <h:outputText value="Data" />  
				            </f:facet>  
				            <h:outputText value="#{lista.data}" > <f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText>
				        </p:column>  
				  
				        <p:column>  
				            <f:facet name="header">  
				                <h:outputText value="Status" />  
				            </f:facet>  
				            <h:outputText value="#{lista.estado}" />  
				        </p:column>  
				  
				    </p:dataTable>  
				  
				</h:form>  
			</p:layoutUnit>

		</p:layout>
        </h:body>

    </f:view>
</html>